/**
 * Alertify
 * An unobtrusive customizable JavaScript notification system
 *
 * @author Fabien Doiron <fabien.doiron@gmail.com>
 * @copyright Fabien Doiron 2012
 * @license The MIT License (MIT) <http://opensource.org/licenses/mit-license.php>
 * @link http://www.github.com/fabien-d
 * @module Alertify
 * @version 0.1a1
 */
(function(e,t){"use strict";var n=e.document,r;r=function(){var e,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x;return m={buttons:{holder:'<nav class="alertify-buttons">{{buttons}}</nav>',ok:'<a href="#" class="alertify-button alertify-button-ok" id="aOK">{{ok}}</a>',cancel:'<a href="#" class="alertify-button alertify-button-cancel" id="aCancel">{{cancel}}</a>'},input:'<input type="text" class="alertify-text" id="aText">',message:'<p class="alertify-message">{{message}}</p>',log:'<article class="alertify-log{{class}}">{{message}}</article>'},g=5e3,w={ENTER:13,ESC:27},E={ok:"OK",cancel:"Cancel"},x=[],b=!1,e=function(e){return n.getElementById(e)},r=function(r){var s=e("aOK")||t,o=e("aCancel")||t,a=e("aText")||t,f=typeof s!="undefined",l=typeof o!="undefined",h="",p,d,v,m;p=function(e){v(e),typeof a!="undefined"&&(h=a.value),typeof r=="function"&&r(!0,h),typeof e.preventDefault!="undefined"&&e.preventDefault()},d=function(e){v(e),typeof r=="function"&&r(!1),typeof e.preventDefault!="undefined"&&e.preventDefault()},v=function(e){u(),c(n.body,"keyup",m)},m=function(e){var t=e.keyCode;t===w.ENTER&&f?p(e):t===w.ESC&&l&&d(e)},f&&i(s,"click",p),l&&i(o,"click",d),n.activeElement.blur(),i(n.body,"keyup",m)},i=function(e,t,n){typeof e.addEventListener=="function"?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,n)},s=function(e){var t="",n=e.type,r=e.message;t+='<div class="alertify-dialog">',t+='<article class="alertify-inner">',t+=m.message.replace("{{message}}",r),n==="prompt"&&(t+=m.input),t+=m.buttons.holder,t+="</article>",t+="</div>";switch(n){case"confirm":case"prompt":t=t.replace("{{buttons}}",m.buttons.cancel+m.buttons.ok),t=t.replace("{{ok}}",E.ok).replace("{{cancel}}",E.cancel);break;case"alert":t=t.replace("{{buttons}}",m.buttons.ok),t=t.replace("{{ok}}",E.ok);break;default:}return y.className="alertify alertify-show alertify-"+n,v.className="alertify-cover",t},o=function(){setTimeout(function(){var e=S.childNodes[S.childNodes.length-1];typeof e!="undefined"&&S.removeChild(e)},g)},u=function(){x.splice(0,1),x.length>0?l():(b=!1,y.className="alertify alertify-hide alertify-hidden",v.className="alertify-cover alertify-hidden")},a=function(){n.createElement("nav"),n.createElement("article"),n.createElement("section"),v=n.createElement("div"),v.setAttribute("id","alertifycover"),v.className="alertify-cover alertify-hidden",n.body.appendChild(v),y=n.createElement("section"),y.setAttribute("id","alertify"),y.className="alertify alertify-hidden",n.body.appendChild(y),S=n.createElement("section"),S.setAttribute("id","alertifylogs"),S.className="alertify-logs",n.body.appendChild(S)},f=function(e,t){var r=n.createElement("article");r.className="alertify-log"+(typeof t=="string"&&t!==""?" alertify-log-"+t:""),r.innerHTML=e,S.insertBefore(r,S.firstChild),setTimeout(function(){r.className=r.className+" alertify-log-show"},50),o()},l=function(){var e=x[0];b=!0,y.innerHTML=s(e),r(e.callback)},c=function(e,t,n){typeof e.removeEventListener=="function"?e.removeEventListener(t,n,!1):e.detachEvent&&e.detachEvent("on"+t,n)},h=function(e,t,n){if(typeof e!="string")throw new Error("message must be a string");if(typeof t!="string")throw new Error("type must be a string");if(typeof n!="undefined"&&typeof n!="function")throw new Error("fn must be a function");return x.push({type:t,message:e,callback:n}),b||l(),this},p=function(e){return function(t){d(t,e)}},d=function(e,t){return f(e,t),this},a(),{alert:function(e,t){return h(e,"alert",t),this},confirm:function(e,t){return h(e,"confirm",t),this},extend:p,log:d,prompt:function(e,t){return h(e,"prompt",t),this},success:function(e){return d(e,"success"),this},error:function(e){return d(e,"error"),this},delay:g,labels:E}},typeof e.alertify=="undefined"&&(e.alertify=new r)})(this);